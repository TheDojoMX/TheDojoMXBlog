<!doctype html><html lang=es dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Creando código de Python robusto, Parte 1 | The Dojo MX Blog</title>
<link rel=icon href=/favicon.svg sizes=any type=image/svg+xml><meta property="og:title" content="Creando código de Python robusto, Parte 1"><meta property="og:description" content="Normalmente no basta con saber lo básico de un lenguaje para hacer código que sea fácil de mantener y seguro. Hablemos de algunas maneras de hacer código robusto con Python."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.thedojo.mx/2022/12/24/creando-c%C3%B3digo-de-python-robusto-parte-1/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-24T00:00:00+00:00"><meta property="article:modified_time" content="2022-12-24T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Creando código de Python robusto, Parte 1"><meta name=twitter:description content="Normalmente no basta con saber lo básico de un lenguaje para hacer código que sea fácil de mantener y seguro. Hablemos de algunas maneras de hacer código robusto con Python."><link rel=stylesheet href=/css/extended.min.771dff75f9f3290205d2bfcbeda2ed15a5984c0414d431dfec3423ae5e37bb90.css integrity="sha256-dx3/dfnzKQIF0r/L7aLtFaWYTAQU1DHf7DQjrl43u5A=" crossorigin=anonymous><link rel=stylesheet href=/css/root.min.0e732b812b9751962e01a7c4798a1211cd5f8ac8abec7f99793fe306989e459f.css integrity="sha256-DnMrgSuXUZYuAafEeYoSEc1fisir7H+ZeT/jBpieRZ8=" crossorigin=anonymous><link rel=stylesheet href=/css/bundle.min.59eb1a059f8cd558e64375ede3e68d3e9120ddb0c6bdbab555c247689cef59e1.css integrity="sha256-WesaBZ+M1VjmQ3Xt4+aNPpEg3bDGvbq1VcJHaJzvWeE=" crossorigin=anonymous><script src=/js/bundle.cc8ae9952dbfb731affafabdf26e5c60a6910047ff59ccdeaf1daebaa26c8830.js integrity="sha256-zIrplS2/tzGv+vq98m5cYKaRAEf/Wczerx2uuqJsiDA=" crossorigin=anonymous></script><script defer src=/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js integrity="sha256-ZFlLEl97eL30+oMWlVkiu+uxzWuu8/FmVL/KIDCfGPg="></script><script defer src=/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js integrity="sha256-HZgPhN8R8+t8jF8X9UHUmgYRYI3xed10+n8GIl61as4="></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel=stylesheet></head><body class=notransition><div id=container><header id=main-header><div role=navigation aria-label=Main><div class=nav-left><a href=https://blog.thedojo.mx/ style=color:inherit>The Dojo MX Blog</a></div><div class=nav-right><div style=position:absolute;width:0;height:0><div id=nav-dropdown-menu class=hidden href=#><div class=nav-item><a aria-current=true class=ancestor href=/posts/>Posts</a></div><div class=nav-item><a>Acerca de</a></div></div></div><a id=nav-dropdown-button href=#><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 6H20M4 12H20M4 18H20" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a><div id=nav-menu><div class=nav-item><a aria-current=true class=ancestor href=/posts/>Posts</a></div><div class=nav-item><a>Acerca de</a></div></div><a id=theme-switcher href=#><svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3V4m0 16v1M4 12H3M6.31412 6.31412 5.5 5.5m12.1859.81412L18.5 5.5M6.31412 17.69 5.5 18.5001M17.6859 17.69 18.5 18.5001M21 12H20m-4 0c0 2.2091-1.7909 4-4 4-2.20914.0-4-1.7909-4-4 0-2.20914 1.79086-4 4-4 2.2091.0 4 1.79086 4 4z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.32031 11.6835c0 4.9706 4.02944 9 8.99999 9 3.7872.0 7.028-2.3392 8.3565-5.6515C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834c-4.9706.0-8.99999-4.0294-8.99999-8.99998C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996 5.65605 4.66028 3.32031 7.89912 3.32031 11.6835z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a></div></div></header><div class="flex grow"><div id=main-pane><main id=main-content><div class=single-header><ol class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://blog.thedojo.mx/><span itemprop=name>Home</span>
</a><meta itemprop=position content='1'></li><span>&nbsp»&nbsp</span><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://blog.thedojo.mx/posts/><span itemprop=name>Posts</span>
</a><meta itemprop=position content='2'></li><span>&nbsp»&nbsp</span></ol><h1>Creando código de Python robusto, Parte 1</h1><time class=dim datetime=2022-12-24T00:00:00+00:00>December 24, 2022</time><div class=term-container><div class=tag><a href=https://blog.thedojo.mx/tags/python/>#python</a></div></ol></div><section class=page-section><p>En esta serie de posts vamos a hablar de algunas cosas que harán que tu código de Python sea:</p><ul><li>resistente al paso del tiempo</li><li>más fácil de entender, de mantener y cambiar</li><li>que evite errores difíciles de encontrar</li></ul><p>En este artículo vamos a empezar a hablar de cómo hacer código que sea resistente al paso del tiempo.</p><h2 id=el-tiempo-y-los-cambios>El tiempo y los cambios</h2><p>En realidad el puro paso del tiempo no le hace nada a ninguna cosa. A lo que nos referimos con esta expresión es que las cosas <strong>cambian</strong> con el tiempo. Estos cambios pueden afectar a partes de tu código aunque estas en sí misma no sufran ninguna modificación. Veamos cómo puedes protegerte con algunos tips específicamente para Python.</p><h3 id=serialización>Serialización</h3><p>En algunos casos, es necesario guardar información que es resultado de la operación de un programa, sea como un paso intermedio para poder recuperar el cálculo en caso de fallo (como un punto de revisión) o para que otros procesos lo tomen.</p><p>Sobre todo en procesos que llevan una gran cantidad de cálculo, algunos programadores están acostumbrados a usar el módulo <code>pickle</code> de Python para guardar información en un archivo. Este módulo es muy útil para guardar <em>objetos</em> de Python en un archivo, pero presenta algunas características inconvenientes:</p><ul><li>Es inseguro, ya que permite ejecutar código arbitrario al cargar un archivo (hay que truquearlo, pero es posible).</li><li>Es <strong>inestable</strong>, ya que permitirá crear una versión de un objeto que no sea compatible con la versión actual del código.</li></ul><p>Aunque la seguridad es muy importante, el punto que queremos tratar ahorita es la inestabilidad. Por ejemplo, si alguna clase de tu código evoluciona, agregando nuevos atributos, el archivo que guardaste y que ahora puedes cargar, creará una versión del objeto sin las características y las guardas que le hayas puesto a la nueva versión. Esto va a causar problemas no detectables hasta que el código que carga el archivo se ejecute.</p><h3 id=alternativas-a-pickle>Alternativas a Pickle</h3><p>Siempre que quieras serializar parte de un programa, enfócate en los <strong>datos</strong>. No en las clases o los objetos. Así, para guardar datos puedes usar cualquier otro formato de serialización que no se meta con el código directo de Python. Algunas opciones son:</p><ul><li><p><a href=https://barcelonageeks.com/serializar-y-deserializar-json-complejo-en-python/>JSON</a>: usa el paquete <code>json</code> para exportar y cargar los datos resultado de las computaciones. Tendrás que convertir tus objetos a diccionarios y listas, pero esto es fácil de hacer y no te afectará cuando cambies tu código.</p></li><li><p><a href=https://blog.conan.io/2019/03/06/Serializing-your-data-with-Protobuf.html>Protocol Buffers</a>: es un formato binario definido por Google para acelarar la comunicación entre diferentes servicios. Es más complicado que usar JSON, pero más eficiente si tienes muchos datos.</p></li><li><p><a href=https://msgpack.org/index.html>MessagePack</a>: usa el paquete <code>msgpack</code> para serializar datos en un formato binario. Es más rápido y también más pequeño que JSON, aunque no es tan fácil de leer.</p></li></ul><h2 id=trabajando-con-fechas>Trabajando con fechas</h2><p>Otra razón por la que tu código puede dar problemas con el paso del tiempo es por un trato incorrecto de las fechas y horas. Cuando una aplicación tiene que recibir datos de horas o fechas de usuarios de diferentes partes del mundo (casi todas las aplicaciones web), es importante asegurarnos de que entendemos bien lo que nos quieren decir y de comunicarnos correctamente con ellos.</p><p>Las zonas horarias son un gran dolor de cabeza para los desarrolladores, pero espero que podamos escribir un artículo más amplio sobre eso en el futuro. Por ahora, vamos a hablar de cómo trabajar con fechas y horas en Python.</p><p>Si no sabes nada de las zonas horarias te recomiendo leer esto: <a href=https://learn.microsoft.com/es-es/dotnet/standard/datetime/time-zone-overview#time-zone-essentials>Fundamentos de la zona horaria</a></p><h3 id=fechas-ingenuas-vs-fechas-conscientes-de-la-zona-horaria>Fechas ingenuas vs fechas conscientes de la zona horaria</h3><p>Esta traducción la siento un poco forzada pero en inglés son <em>naive</em> y <em>timezone aware</em>. (¿Alguien tiene una mejor idea?)</p><p>En Python, las fechas y horas se representan con objetos de la clase <code>datetime</code>. Esta clase tiene dos subclases: <code>datetime.datetime</code> y <code>datetime.date</code>. Cuando la usas así, directamente sin especificar una zona horaria, estás usando una fecha ingenua. Por ejemplo:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> datetime <span style=color:#f92672>import</span> datetime
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fecha <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>now() <span style=color:#75715e># Esta fecha no incluye ninguna información sobre la zona horaria</span>
</span></span></code></pre></div><p>Aunque esto funciona bien para programas que sólo van a correr en tu computadora y que <em>siempre</em> van a correr nadamás para ti, no es suficiente cuando esta información va a ser compartida o se tiene que guardar para el uso futuro.</p><p>La forma de usar una fecha consciente de la zona horaria en Python es:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> datetime <span style=color:#f92672>import</span> datetime, timezone
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fecha <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>now(tz<span style=color:#f92672>=</span>timezone<span style=color:#f92672>.</span>utc) <span style=color:#75715e># Esta fecha incluye información sobre la zona horaria, en este caso UTC</span>
</span></span></code></pre></div><p>De esta manera nos protegemos para no dar por sentado en qué zona horaria se creo cierto dato o a que zona horaria se refiere cierta fecha. A partir de Python 3.9 tenemos disponible un paquete que se llama <code>zoneinfo</code> que nos permite trabajar con zonas horarias sin tener que instalar nada extra (excepto en Windows donde es probable que necesites los datos de <a href=https://pypi.org/project/tzdata/>tzdata</a>). Si estás usando Python 3.8 o anterior, puedes instalar el paquete <code>pytz</code> para poder usar zonas horarias o importar desde <code>backports.zoneinfo</code> (también se tiene que instalar). Aquí hay un ejemplo:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> datetime <span style=color:#f92672>import</span> datetime
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> zoneinfo <span style=color:#f92672>import</span> ZoneInfo
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fecha <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>now(tz<span style=color:#f92672>=</span>ZoneInfo(<span style=color:#e6db74>&#34;America/Mexico_City&#34;</span>)) <span style=color:#75715e># Esta fecha incluye información sobre la zona horaria, en este caso la de México</span>
</span></span><span style=display:flex><span><span style=color:#75715e># datetime.datetime(2022, 12, 24, 20, 2, 21, 887237, tzinfo=zoneinfo.ZoneInfo(key=&#39;America/Mexico_City&#39;))</span>
</span></span></code></pre></div><p>Así puedes crear siempre fechas con zonas horarias para que no tengas problemas a la hora de reutilizarla. Ahora hablemos de por qué es recomendable siempre usar la zona horaria UTC.</p><h3 id=el-tiempo-universal-coordinado-utc>El tiempo universal coordinado (UTC)</h3><p><strong>UTC</strong> son las siglas para <strong>Universal Time Coordinated</strong> o el <strong>Tiempo Universal Coordinado</strong>. Este es un estándar para determinar la hora universal. Incluye todos los detalles de cómo obtener el tiempo, la coordinación, cómo tratar los segundos faltantes en el calendario gregoriano, etc. etc. etc. Coordinar el tiempo es un asunto muy complejo.</p><p>UTC, a diferencia de lo que creemos los programadores <strong>no es una zona horaria</strong>, aunque nosotros lo usemos así. Antes se conocía como <strong>GMT</strong> (Greenwich Mean Time), pero otros de sus alias son &ldquo;Z time&rdquo; o &ldquo;Zulu time&rdquo;. Puedes leer el estándar, las motivaciones y la historia en este documento de la (BIPM)[]: <a href=https://www.bipm.org/documents/20126/28435864/working-document-ID-3644/2a6ce17c-7b50-4164-9bee-64f77bfad895>Coordinated Universal Time</a>.</p><p>Aunque <strong>UTC</strong> es el estándar, <strong>GMT</strong> pasó a ser el nombre de la zona horaria que no tiene diferencia con el UTC. Ahora ya sabes entonces que lo que los programadores llamamos &ldquo;UTC&rdquo; es en realidad la zona horaria &ldquo;GMT&rdquo;.</p><p><strong>¿A qué viene todo esto?</strong> Es recomendado que siempre que tengas que guardar fechas y horas, <strong>antes las conviertas en fechas conscientes de la zona en UTC</strong>. Al tener esto estandarizado, podrás convertirla sin ningún problema en cualquier zona horaria que el usuario necesite. Además no tendrás problemas para hacer aritmética con fechas y horas.</p><p>Tampoco tendrás que preocuparte por problemas con el horarios de verano, ya que UTC no sufre ese cambio.</p><h2 id=conclusión>Conclusión</h2><p>Hay cosas a las que le tenemos que poner atención y a veces aprender un poco más para que nuestro código soporte el paso del tiempo. En esta serie de artículos seguiremos hablando sobre este tipo de cosas.</p><p>Este artículo estuvo inspirado por dos temas del libro <a href=https://pragprog.com/titles/dmpython/intuitive-python/>Intuitive Python</a> de <a href=https://github.com/DavidMuller>David Muller</a>.</p></section></main><footer id=main-footer><div class=footer><a href=#>Scroll to Top</a><div class=footer-copyright><div class=dim>© 2025 Héctor Patricio</div><div>Made with ❤️ and powered by <a href=https://github.com/math-queiroz/rusty-typewriter target=_blank>Rusty Typewriter</a> theme for <a href=https://gohugo.io/ target=_blank>Hugo</a></div></div></div></footer></div><aside id=side-pane class=side-sticky><div class=side-details><span>1191 words</span>
<span>7 - 9 minutes read</span></div><h3>Table Of Contents</h3><nav id=TableOfContents><ul><li><a href=#el-tiempo-y-los-cambios>El tiempo y los cambios</a><ul><li><a href=#serialización>Serialización</a></li><li><a href=#alternativas-a-pickle>Alternativas a Pickle</a></li></ul></li><li><a href=#trabajando-con-fechas>Trabajando con fechas</a><ul><li><a href=#fechas-ingenuas-vs-fechas-conscientes-de-la-zona-horaria>Fechas ingenuas vs fechas conscientes de la zona horaria</a></li><li><a href=#el-tiempo-universal-coordinado-utc>El tiempo universal coordinado (UTC)</a></li></ul></li><li><a href=#conclusión>Conclusión</a></li></ul></nav><h3>Related</h3><ul><li><a href=/2021/12/01/20-bibliotecas-de-python-que-deber%C3%ADas-estar-usando/>20 bibliotecas de Python que deberías estar usando</a></li><li><a href=/2019/06/22/libros-gratuitos-para-aprender-an%C3%A1lisis-de-datos/>Libros gratuitos para aprender análisis de datos</a></li><li><a href=/2019/03/12/tres-formas-de-crear-apis-con-python/>Tres formas de crear API's con Python</a></li><li><a href=/2019/02/21/patr%C3%B3n-de-dise%C3%B1o-cadena-de-responsabilidad/>Patrón de diseño: Cadena de responsabilidad</a></li></ul></aside></div></div></body></html>