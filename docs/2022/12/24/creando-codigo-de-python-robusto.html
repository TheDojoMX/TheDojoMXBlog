<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="es" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Creando código de Python robusto, Parte 1 - The Dojo MX Blog</title>
<meta name="description" content="Normalmente no basta con saber lo básico de un lenguaje para hacer código que sea fácil de mantener y seguro. Hablemos de algunas maneras de hacer código robusto con Python.">


  <meta name="author" content="Héctor Patricio">
  
  <meta property="article:author" content="Héctor Patricio">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="es">
<meta property="og:site_name" content="The Dojo MX Blog">
<meta property="og:title" content="Creando código de Python robusto, Parte 1">
<meta property="og:url" content="https://blog.thedojo.mx/2022/12/24/creando-codigo-de-python-robusto.html">


  <meta property="og:description" content="Normalmente no basta con saber lo básico de un lenguaje para hacer código que sea fácil de mantener y seguro. Hablemos de algunas maneras de hacer código robusto con Python.">



  <meta property="og:image" content="https://res.cloudinary.com/hectorip/image/upload/c_fill,g_north,h_350,q_59,w_1200,x_100,y_100/v1661094369/DALL_E_2022-08-12_11.14.36_-_dangerous_green_and_black_python_ready_to_byte_digital_art_bgspv1.png">





  <meta property="article:published_time" content="2022-12-24T00:00:00-06:00">






<link rel="canonical" href="https://blog.thedojo.mx/2022/12/24/creando-codigo-de-python-robusto.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://blog.thedojo.mx/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="The Dojo MX Blog Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    
<!-- favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/images/favicons/site.webmanifest">
<link rel="mask-icon" href="/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/images/favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/images/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
<!-- end favicon -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZNSYMJDY5S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZNSYMJDY5S');
</script>

<!-- Hotjar Tracking Code for blog.thedojo.mx -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:1217463,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

<script src="/assets/js/sharect.min.js"></script>

<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "url": "https://blog.thedojo.mx/2022/12/24/creando-codigo-de-python-robusto.html",
      "name": "Creando código de Python robusto, Parte 1",
      "headline": "Creando código de Python robusto, Parte 1",
      "keywords": "python",
      "description": "Normalmente no basta con saber lo básico de un lenguaje para hacer código que sea fácil de mantener y seguro. Hablemos de algunas maneras de hacer código robusto con Python.",
      "articleBody": "En esta serie de posts vamos a hablar de algunas cosas que harán que tu código de Python sea:\n\n\n  resistente al paso del tiempo\n  más fácil de entender, de mantener y cambiar\n  que evite errores difíciles de encontrar\n\n\nEn este artículo vamos a empezar a hablar de cómo hacer código que sea resistente al paso del tiempo.\n\nEl tiempo y los cambios\n\nEn realidad el puro paso del tiempo no le hace nada a ninguna cosa. A lo que nos referimos con esta expresión es que las cosas cambian con el tiempo. Estos cambios pueden afectar a partes de tu código aunque estas en sí misma no sufran ninguna modificación. Veamos cómo puedes protegerte con algunos tips específicamente para Python.\n\nSerialización\n\nEn algunos casos, es necesario guardar información que es resultado de la operación de un programa, sea como un paso intermedio para poder recuperar el cálculo en caso de fallo (como un punto de revisión) o para que otros procesos lo tomen.\n\nSobre todo en procesos que llevan una gran cantidad de cálculo, algunos programadores están acostumbrados a usar el módulo pickle de Python para guardar información en un archivo. Este módulo es muy útil para guardar objetos de Python en un archivo, pero presenta algunas características inconvenientes:\n\n\n  Es inseguro, ya que permite ejecutar código arbitrario al cargar un archivo (hay que truquearlo, pero es posible).\n  Es inestable, ya que permitirá crear una versión de un objeto que no sea compatible con la versión actual del código.\n\n\nAunque la seguridad es muy importante, el punto que queremos tratar ahorita es la inestabilidad. Por ejemplo, si alguna clase de tu código evoluciona, agregando nuevos atributos, el archivo que guardaste y que ahora puedes cargar, creará una versión del objeto sin las características y las guardas que le hayas puesto a la nueva versión. Esto va a causar problemas no detectables hasta que el código que carga el archivo se ejecute.\n\nAlternativas a Pickle\n\nSiempre que quieras serializar parte de un programa, enfócate en los datos. No en las clases o los objetos. Así, para guardar datos puedes usar cualquier otro formato de serialización que no se meta con el código directo de Python. Algunas opciones son:\n\n\n  \n    JSON: usa el paquete json para exportar y cargar los datos resultado de las computaciones. Tendrás que convertir tus objetos a diccionarios y listas, pero esto es fácil de hacer y no te afectará cuando cambies tu código.\n  \n  \n    Protocol Buffers: es un formato binario definido por Google para acelarar la comunicación entre diferentes servicios. Es más complicado que usar JSON, pero más eficiente si tienes muchos datos.\n  \n  \n    MessagePack: usa el paquete msgpack para serializar datos en un formato binario. Es más rápido y también más pequeño que JSON, aunque no es tan fácil de leer.\n  \n\n\nTrabajando con fechas\n\nOtra razón por la que tu código puede dar problemas con el paso del tiempo es por un trato incorrecto de las fechas y horas. Cuando una aplicación tiene que recibir datos de horas o fechas de usuarios de diferentes partes del mundo (casi todas las aplicaciones web), es importante asegurarnos de que entendemos bien lo que nos quieren decir y de comunicarnos correctamente con ellos.\n\nLas zonas horarias son un gran dolor de cabeza para los desarrolladores, pero espero que podamos escribir un artículo más amplio sobre eso en el futuro. Por ahora, vamos a hablar de cómo trabajar con fechas y horas en Python.\n\nSi no sabes nada de las zonas horarias te recomiendo leer esto: Fundamentos de la zona horaria\n\nFechas ingenuas vs fechas conscientes de la zona horaria\n\nEsta traducción la siento un poco forzada pero en inglés son naive y timezone aware. (¿Alguien tiene una mejor idea?)\n\nEn Python, las fechas y horas se representan con objetos de la clase datetime. Esta clase tiene dos subclases: datetime.datetime y datetime.date. Cuando la usas así, directamente sin especificar una zona horaria, estás usando una fecha ingenua. Por ejemplo:\n\nfrom datetime import datetime\n\nfecha = datetime.now() # Esta fecha no incluye ninguna información sobre la zona horaria\n\n\n\nAunque esto funciona bien para programas que sólo van a correr en tu computadora y que siempre van a correr nadamás para ti, no es suficiente cuando esta información va a ser compartida o se tiene que guardar para el uso futuro.\n\nLa forma de usar una fecha consciente de la zona horaria en Python es:\n\nfrom datetime import datetime, timezone\n\n\nfecha = datetime.now(tz=timezone.utc) # Esta fecha incluye información sobre la zona horaria, en este caso UTC\n\n\n\nDe esta manera nos protegemos para no dar por sentado en qué zona horaria se creo cierto dato o a que zona horaria se refiere cierta fecha. A partir de Python 3.9 tenemos disponible un paquete que se llama zoneinfo que nos permite trabajar con zonas horarias sin tener que instalar nada extra (excepto en Windows donde es probable que necesites los datos de tzdata). Si estás usando Python 3.8 o anterior, puedes instalar el paquete pytz para poder usar zonas horarias o importar desde backports.zoneinfo (también se tiene que instalar). Aquí hay un ejemplo:\n\nfrom datetime import datetime\nfrom zoneinfo import ZoneInfo\n\nfecha = datetime.now(tz=ZoneInfo(\"America/Mexico_City\")) # Esta fecha incluye información sobre la zona horaria, en este caso la de México\n# datetime.datetime(2022, 12, 24, 20, 2, 21, 887237, tzinfo=zoneinfo.ZoneInfo(key='America/Mexico_City'))\n\n\n\nAsí puedes crear siempre fechas con zonas horarias para que no tengas problemas a la hora de reutilizarla. Ahora hablemos de por qué es recomendable siempre usar la zona horaria UTC.\n\nEl tiempo universal coordinado (UTC)\n\nUTC son las siglas para Universal Time Coordinated o el Tiempo Universal Coordinado. Este es un estándar para determinar la hora universal. Incluye todos los detalles de cómo obtener el tiempo, la coordinación, cómo tratar los segundos faltantes en el calendario gregoriano, etc. etc. etc. Coordinar el tiempo es un asunto muy complejo.\n\nUTC, a diferencia de lo que creemos los programadores no es una zona horaria, aunque nosotros lo usemos así. Antes se conocía como GMT (Greenwich Mean Time), pero otros de sus alias son “Z time” o “Zulu time”. Puedes leer el estándar, las motivaciones y la historia en este documento de la (BIPM)[]: Coordinated Universal Time.\n\nAunque UTC es el estándar, GMT pasó a ser el nombre de la zona horaria que no tiene diferencia con el UTC. Ahora ya sabes entonces que lo que los programadores llamamos “UTC” es en realidad la zona horaria “GMT”.\n\n¿A qué viene todo esto? Es recomendado que siempre que tengas que guardar fechas y horas, antes las conviertas en fechas conscientes de la zona en UTC. Al tener esto estandarizado, podrás convertirla sin ningún problema en cualquier zona horaria que el usuario necesite. Además no tendrás problemas para hacer aritmética con fechas y horas.\n\nTampoco tendrás que preocuparte por problemas con el horarios de verano, ya que UTC no sufre ese cambio.\n\nConclusión\n\nHay cosas a las que le tenemos que poner atención y a veces aprender un poco más para que nuestro código soporte el paso del tiempo. En esta serie de artículos seguiremos hablando sobre este tipo de cosas.\n\nEste artículo estuvo inspirado por dos temas del libro Intuitive Python de David Muller.\n",
      "datePublished": "2022-12-24 00:00:00 -0600",
      "dateModified": "2022-12-24 00:00:00 -0600",
      "author": {
        "@type": "Person",
        "name": "Héctor Patricio",
        "givenName": "Héctor Patricio",
        "email": null
      },
      "publisher": {
        "@type": "Organization",
        "name": "The Dojo MX Blog",
        "url": "https://blog.thedojo.mx",
        "logo": {
          "@type": "ImageObject",
          "width": 32,
          "height": 32,
          "url": "https://blog.thedojo.mx/icon/favicon.ico"
        }
      },
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.thedojo.mx/2022/12/24/creando-codigo-de-python-robusto.html"
      },
      "image": {
        "@type": "ImageObject",
        "width": 1200,
        "height": 400,
        "url": "https://res.cloudinary.com/hectorip/image/upload/c_fill,g_north,h_350,q_59,w_1200,x_100,y_100/v1661094369/DALL_E_2022-08-12_11.14.36_-_dangerous_green_and_black_python_ready_to_byte_digital_art_bgspv1.png"
      }
    }
</script>

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="https://res.cloudinary.com/hectorip/image/upload/v1554098427/TheDojo/the-dojo-transparent.png" alt="The Dojo MX Blog"></a>
        
        <a class="site-title" href="/">
          The Dojo MX Blog
          
        </a>
        <ul class="visible-links">
<li class="masthead__menu-item">
              <a href="/latest">Todos los posts</a>
            </li>
<li class="masthead__menu-item">
              <a href="/about">Acerca de</a>
            </li>
<li class="masthead__menu-item">
              <a href="https://thedojo.mx">Cursos</a>
            </li>
</ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay" style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://res.cloudinary.com/hectorip/image/upload/c_fill,g_north,h_350,q_59,w_1200,x_100,y_100/v1661094369/DALL_E_2022-08-12_11.14.36_-_dangerous_green_and_black_python_ready_to_byte_digital_art_bgspv1.png');">
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Creando código de Python robusto, Parte 1

        
      </h1>
      
        <p class="page__lead">Normalmente no basta con saber lo básico de un lenguaje para hacer código que sea fácil de mantener y seguro. Hablemos de algunas maneras de hacer código robusto con Python.
</p>
      
      

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
        1191 palabras | 7 minutos de lectura
        
      </span>
    
  </p>

      
      
    </div>
  
  
</div>







<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/me.jpg" alt="Héctor Patricio" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Héctor Patricio</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Tech Leader en Automata</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Seguir</button>
    <ul class="author__urls social-icons">
      

      

      
        <li>
          <a href="https://github.com/hectorip" itemprop="url">
            <i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Sitio web</span>
          </a>
        </li>
      

      
        <li>
          <a href="mailto:hectorivanpatriciomoreno@gmail.com">
            <meta itemprop="email" content="hectorivanpatriciomoreno@gmail.com">
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://twitter.com/hectorip" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Creando código de Python robusto, Parte 1">
    <meta itemprop="description" content="Normalmente no basta con saber lo básico de un lenguaje para hacer código que sea fácil de mantener y seguro. Hablemos de algunas maneras de hacer código robusto con Python.">
    <meta itemprop="datePublished" content="2022-12-24T00:00:00-06:00">
    

    <div class="page__inner-wrap">
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title">
<i class="fas fa-file-alt"></i> Contenidos</h4></header>
              <ul class="toc__menu">
<li>
<a href="#el-tiempo-y-los-cambios">El tiempo y los cambios</a><ul>
<li><a href="#serializaci%C3%B3n">Serialización</a></li>
<li><a href="#alternativas-a-pickle">Alternativas a Pickle</a></li>
</ul>
</li>
<li>
<a href="#trabajando-con-fechas">Trabajando con fechas</a><ul>
<li><a href="#fechas-ingenuas-vs-fechas-conscientes-de-la-zona-horaria">Fechas ingenuas vs fechas conscientes de la zona horaria</a></li>
<li><a href="#el-tiempo-universal-coordinado-utc">El tiempo universal coordinado (UTC)</a></li>
</ul>
</li>
<li><a href="#conclusi%C3%B3n">Conclusión</a></li>
</ul>

            </nav>
          </aside>
        
        <div style="border: 1px solid gray; border-radius: 4px; margin: 20px; padding: 5px;">
          Visita nuestro canal de YouTube para encontrar temas similares en video:<a href="https://youtube.com/thedojomx"> The Dojo MX en YouTube </a>

        </div>
        <p>En esta serie de posts vamos a hablar de algunas cosas que harán que tu código de Python sea:</p>

<ul>
  <li>resistente al paso del tiempo</li>
  <li>más fácil de entender, de mantener y cambiar</li>
  <li>que evite errores difíciles de encontrar</li>
</ul>

<p>En este artículo vamos a empezar a hablar de cómo hacer código que sea resistente al paso del tiempo.</p>

<h2 id="el-tiempo-y-los-cambios">El tiempo y los cambios</h2>

<p>En realidad el puro paso del tiempo no le hace nada a ninguna cosa. A lo que nos referimos con esta expresión es que las cosas <strong>cambian</strong> con el tiempo. Estos cambios pueden afectar a partes de tu código aunque estas en sí misma no sufran ninguna modificación. Veamos cómo puedes protegerte con algunos tips específicamente para Python.</p>

<h3 id="serialización">Serialización</h3>

<p>En algunos casos, es necesario guardar información que es resultado de la operación de un programa, sea como un paso intermedio para poder recuperar el cálculo en caso de fallo (como un punto de revisión) o para que otros procesos lo tomen.</p>

<p>Sobre todo en procesos que llevan una gran cantidad de cálculo, algunos programadores están acostumbrados a usar el módulo <code class="language-plaintext highlighter-rouge">pickle</code> de Python para guardar información en un archivo. Este módulo es muy útil para guardar <em>objetos</em> de Python en un archivo, pero presenta algunas características inconvenientes:</p>

<ul>
  <li>Es inseguro, ya que permite ejecutar código arbitrario al cargar un archivo (hay que truquearlo, pero es posible).</li>
  <li>Es <strong>inestable</strong>, ya que permitirá crear una versión de un objeto que no sea compatible con la versión actual del código.</li>
</ul>

<p>Aunque la seguridad es muy importante, el punto que queremos tratar ahorita es la inestabilidad. Por ejemplo, si alguna clase de tu código evoluciona, agregando nuevos atributos, el archivo que guardaste y que ahora puedes cargar, creará una versión del objeto sin las características y las guardas que le hayas puesto a la nueva versión. Esto va a causar problemas no detectables hasta que el código que carga el archivo se ejecute.</p>

<h3 id="alternativas-a-pickle">Alternativas a Pickle</h3>

<p>Siempre que quieras serializar parte de un programa, enfócate en los <strong>datos</strong>. No en las clases o los objetos. Así, para guardar datos puedes usar cualquier otro formato de serialización que no se meta con el código directo de Python. Algunas opciones son:</p>

<ul>
  <li>
    <p><a href="https://barcelonageeks.com/serializar-y-deserializar-json-complejo-en-python/">JSON</a>: usa el paquete <code class="language-plaintext highlighter-rouge">json</code> para exportar y cargar los datos resultado de las computaciones. Tendrás que convertir tus objetos a diccionarios y listas, pero esto es fácil de hacer y no te afectará cuando cambies tu código.</p>
  </li>
  <li>
    <p><a href="https://blog.conan.io/2019/03/06/Serializing-your-data-with-Protobuf.html">Protocol Buffers</a>: es un formato binario definido por Google para acelarar la comunicación entre diferentes servicios. Es más complicado que usar JSON, pero más eficiente si tienes muchos datos.</p>
  </li>
  <li>
    <p><a href="https://msgpack.org/index.html">MessagePack</a>: usa el paquete <code class="language-plaintext highlighter-rouge">msgpack</code> para serializar datos en un formato binario. Es más rápido y también más pequeño que JSON, aunque no es tan fácil de leer.</p>
  </li>
</ul>

<h2 id="trabajando-con-fechas">Trabajando con fechas</h2>

<p>Otra razón por la que tu código puede dar problemas con el paso del tiempo es por un trato incorrecto de las fechas y horas. Cuando una aplicación tiene que recibir datos de horas o fechas de usuarios de diferentes partes del mundo (casi todas las aplicaciones web), es importante asegurarnos de que entendemos bien lo que nos quieren decir y de comunicarnos correctamente con ellos.</p>

<p>Las zonas horarias son un gran dolor de cabeza para los desarrolladores, pero espero que podamos escribir un artículo más amplio sobre eso en el futuro. Por ahora, vamos a hablar de cómo trabajar con fechas y horas en Python.</p>

<p>Si no sabes nada de las zonas horarias te recomiendo leer esto: <a href="https://learn.microsoft.com/es-es/dotnet/standard/datetime/time-zone-overview#time-zone-essentials">Fundamentos de la zona horaria</a></p>

<h3 id="fechas-ingenuas-vs-fechas-conscientes-de-la-zona-horaria">Fechas ingenuas vs fechas conscientes de la zona horaria</h3>

<p>Esta traducción la siento un poco forzada pero en inglés son <em>naive</em> y <em>timezone aware</em>. (¿Alguien tiene una mejor idea?)</p>

<p>En Python, las fechas y horas se representan con objetos de la clase <code class="language-plaintext highlighter-rouge">datetime</code>. Esta clase tiene dos subclases: <code class="language-plaintext highlighter-rouge">datetime.datetime</code> y <code class="language-plaintext highlighter-rouge">datetime.date</code>. Cuando la usas así, directamente sin especificar una zona horaria, estás usando una fecha ingenua. Por ejemplo:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">fecha</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span> <span class="c1"># Esta fecha no incluye ninguna información sobre la zona horaria
</span>
</code></pre></div></div>

<p>Aunque esto funciona bien para programas que sólo van a correr en tu computadora y que <em>siempre</em> van a correr nadamás para ti, no es suficiente cuando esta información va a ser compartida o se tiene que guardar para el uso futuro.</p>

<p>La forma de usar una fecha consciente de la zona horaria en Python es:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span>


<span class="n">fecha</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">timezone</span><span class="p">.</span><span class="n">utc</span><span class="p">)</span> <span class="c1"># Esta fecha incluye información sobre la zona horaria, en este caso UTC
</span>
</code></pre></div></div>

<p>De esta manera nos protegemos para no dar por sentado en qué zona horaria se creo cierto dato o a que zona horaria se refiere cierta fecha. A partir de Python 3.9 tenemos disponible un paquete que se llama <code class="language-plaintext highlighter-rouge">zoneinfo</code> que nos permite trabajar con zonas horarias sin tener que instalar nada extra (excepto en Windows donde es probable que necesites los datos de <a href="https://pypi.org/project/tzdata/">tzdata</a>). Si estás usando Python 3.8 o anterior, puedes instalar el paquete <code class="language-plaintext highlighter-rouge">pytz</code> para poder usar zonas horarias o importar desde <code class="language-plaintext highlighter-rouge">backports.zoneinfo</code> (también se tiene que instalar). Aquí hay un ejemplo:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">zoneinfo</span> <span class="kn">import</span> <span class="n">ZoneInfo</span>

<span class="n">fecha</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">ZoneInfo</span><span class="p">(</span><span class="s">"America/Mexico_City"</span><span class="p">))</span> <span class="c1"># Esta fecha incluye información sobre la zona horaria, en este caso la de México
# datetime.datetime(2022, 12, 24, 20, 2, 21, 887237, tzinfo=zoneinfo.ZoneInfo(key='America/Mexico_City'))
</span>
</code></pre></div></div>

<p>Así puedes crear siempre fechas con zonas horarias para que no tengas problemas a la hora de reutilizarla. Ahora hablemos de por qué es recomendable siempre usar la zona horaria UTC.</p>

<h3 id="el-tiempo-universal-coordinado-utc">El tiempo universal coordinado (UTC)</h3>

<p><strong>UTC</strong> son las siglas para <strong>Universal Time Coordinated</strong> o el <strong>Tiempo Universal Coordinado</strong>. Este es un estándar para determinar la hora universal. Incluye todos los detalles de cómo obtener el tiempo, la coordinación, cómo tratar los segundos faltantes en el calendario gregoriano, etc. etc. etc. Coordinar el tiempo es un asunto muy complejo.</p>

<p>UTC, a diferencia de lo que creemos los programadores <strong>no es una zona horaria</strong>, aunque nosotros lo usemos así. Antes se conocía como <strong>GMT</strong> (Greenwich Mean Time), pero otros de sus alias son “Z time” o “Zulu time”. Puedes leer el estándar, las motivaciones y la historia en este documento de la (BIPM)[]: <a href="https://www.bipm.org/documents/20126/28435864/working-document-ID-3644/2a6ce17c-7b50-4164-9bee-64f77bfad895">Coordinated Universal Time</a>.</p>

<p>Aunque <strong>UTC</strong> es el estándar, <strong>GMT</strong> pasó a ser el nombre de la zona horaria que no tiene diferencia con el UTC. Ahora ya sabes entonces que lo que los programadores llamamos “UTC” es en realidad la zona horaria “GMT”.</p>

<p><strong>¿A qué viene todo esto?</strong> Es recomendado que siempre que tengas que guardar fechas y horas, <strong>antes las conviertas en fechas conscientes de la zona en UTC</strong>. Al tener esto estandarizado, podrás convertirla sin ningún problema en cualquier zona horaria que el usuario necesite. Además no tendrás problemas para hacer aritmética con fechas y horas.</p>

<p>Tampoco tendrás que preocuparte por problemas con el horarios de verano, ya que UTC no sufre ese cambio.</p>

<h2 id="conclusión">Conclusión</h2>

<p>Hay cosas a las que le tenemos que poner atención y a veces aprender un poco más para que nuestro código soporte el paso del tiempo. En esta serie de artículos seguiremos hablando sobre este tipo de cosas.</p>

<p>Este artículo estuvo inspirado por dos temas del libro <a href="https://pragprog.com/titles/dmpython/intuitive-python/">Intuitive Python</a> de <a href="https://github.com/DavidMuller">David Muller</a>.</p>

       <div style="border: 1px solid gray; border-radius: 4px; margin: 20px; padding: 5px;">
          Visita nuestro canal de YouTube para encontrar temas similares en video:<a href="https://youtube.com/thedojomx"> The Dojo MX en YouTube </a>
        </div>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Etiquetas: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#python" class="page__taxonomy-item" rel="tag">python</a>
    
    </span>
  </p>




        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Actualizado:</strong> <time datetime="2022-12-24T00:00:00-06:00">December 24, 2022</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Compartir</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Creando+c%C3%B3digo+de+Python+robusto%2C+Parte+1%20https%3A%2F%2Fblog.thedojo.mx%2F2022%2F12%2F24%2Fcreando-codigo-de-python-robusto.html" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Compartir Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.thedojo.mx%2F2022%2F12%2F24%2Fcreando-codigo-de-python-robusto.html" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Compartir Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fblog.thedojo.mx%2F2022%2F12%2F24%2Fcreando-codigo-de-python-robusto.html" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Compartir LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/2022/12/22/tomando-notas-efectivamente-zettelkasten.html" class="pagination--pager" title="Tomando notas efectivamente: Zettelkasten
">Anterior</a>
    
    
      <a href="/2022/12/26/explicaciones-elocuentes.html" class="pagination--pager" title="Explicaciones elocuentes
">Siguiente</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comentar</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">Podrías ver también</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="https://res.cloudinary.com/hectorip/image/upload/c_crop,h_450,w_1024/v1673577537/DALL_E_2023-01-12_20.38.31_-_a_mechanical_brain_in_the_back_of_a_robot_s_head_made_as_a__membrane__that_is_a_complex_machine_made_of_very_tiny_gears_levers_and_other_mechanical_dexwfs.png" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/2023/01/18/compilacion-just-in-time-que-es.html" rel="permalink">Qué es la compilación Just In Time (JIT)
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




9 minutos de lectura



| <i class="far fa-calendar" aria-hidden="true"></i> 18-01-2023
</p>
    
    <p class="archive__item-excerpt" itemprop="description">¿Has escuchado que varios lenguajes están agregando la capacidad de compilación Just In Time a sus entornos? Hablemos de qué es y cómo te beneficia.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="https://res.cloudinary.com/hectorip/image/upload/c_crop,h_600,w_300/v1673056123/DALL_E_2023-01-06_19.47.48_-_Perceptron_artistic_digital_paint_high_quality_detailed_wpoohz.png" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/2023/01/07/ejercicio-programando-un-perceptron.html" rel="permalink">Ejercicio: programando un perceptrón con Python
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




13 minutos de lectura



| <i class="far fa-calendar" aria-hidden="true"></i> 07-01-2023
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Programemos un perceptrón en Python para entender a fondo como funciona y poder construir sobre eso para temas más complejos.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="https://res.cloudinary.com/hectorip/image/upload/c_scale,w_300/v1672204121/ivan-bandura-8VePVILfCKU-unsplash_bhsnsa.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/2022/12/30/claridad-en-el-codigo.html" rel="permalink">Claridad de  Saša Jurić
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




7 minutos de lectura



| <i class="far fa-calendar" aria-hidden="true"></i> 30-12-2022
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Todos quisiéramos tener bases de código perfectas, fáciles de mantener y totalmente claras. Esto es casi imposible, pero podemos acercarnos. Vemos cómo.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="https://res.cloudinary.com/hectorip/image/upload/c_lfill,h_450,w_1200/v1671858924/ryan-baker-VgROGebCi80-unsplash_p2jzj3.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/2022/12/26/explicaciones-elocuentes.html" rel="permalink">Explicaciones elocuentes
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




7 minutos de lectura



| <i class="far fa-calendar" aria-hidden="true"></i> 26-12-2022
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Comunicar claramente y de manera efectiva es una de las tareas más importantes de los desarrolladores. Hablemos de las técnicas que puedes seguir para mejora...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
<form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term...">
  </form>
  <div id="results" class="results"></div>
</div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        
<script>
    var sharect = new Sharect();
    sharect.config({
    //   facebook: true,
      twitter: true,
      twitterUsername: '@thedojomx',
      backgroundColor: '#ff4081',
      iconColor: '#fff'
    }).init();

</script>
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Seguir:</strong></li>
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">© 2023 The Dojo MX Blog. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-127437335-2']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://blog.thedojo.mx/2022/12/24/creando-codigo-de-python-robusto.html";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/2022/12/24/creando-codigo-de-python-robusto"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://the-dojo-mx-blog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>


  





  </body>
</html>
