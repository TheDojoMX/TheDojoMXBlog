<!doctype html><html lang=es dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Producción y desarollo en Django | The Dojo MX Blog</title>
<link rel=icon href=/favicon.svg sizes=any type=image/svg+xml><meta property="og:title" content="Producción y desarollo en Django"><meta property="og:description" content="Una manera para manejar producción y desarrollo sin tanto esfuerzo."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.thedojo.mx/2019/03/09/producci%C3%B3n-y-desarollo-en-django/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-03-09T00:00:00+00:00"><meta property="article:modified_time" content="2019-03-09T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Producción y desarollo en Django"><meta name=twitter:description content="Una manera para manejar producción y desarrollo sin tanto esfuerzo."><link rel=stylesheet href=/css/extended.min.771dff75f9f3290205d2bfcbeda2ed15a5984c0414d431dfec3423ae5e37bb90.css integrity="sha256-dx3/dfnzKQIF0r/L7aLtFaWYTAQU1DHf7DQjrl43u5A=" crossorigin=anonymous><link rel=stylesheet href=/css/root.min.0e732b812b9751962e01a7c4798a1211cd5f8ac8abec7f99793fe306989e459f.css integrity="sha256-DnMrgSuXUZYuAafEeYoSEc1fisir7H+ZeT/jBpieRZ8=" crossorigin=anonymous><link rel=stylesheet href=/css/bundle.min.59eb1a059f8cd558e64375ede3e68d3e9120ddb0c6bdbab555c247689cef59e1.css integrity="sha256-WesaBZ+M1VjmQ3Xt4+aNPpEg3bDGvbq1VcJHaJzvWeE=" crossorigin=anonymous><script src=/js/bundle.cc8ae9952dbfb731affafabdf26e5c60a6910047ff59ccdeaf1daebaa26c8830.js integrity="sha256-zIrplS2/tzGv+vq98m5cYKaRAEf/Wczerx2uuqJsiDA=" crossorigin=anonymous></script><script defer src=/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js integrity="sha256-ZFlLEl97eL30+oMWlVkiu+uxzWuu8/FmVL/KIDCfGPg="></script><script defer src=/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js integrity="sha256-HZgPhN8R8+t8jF8X9UHUmgYRYI3xed10+n8GIl61as4="></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel=stylesheet></head><body class=notransition><div id=container><header id=main-header><div role=navigation aria-label=Main><div class=nav-left><a href=https://blog.thedojo.mx/ style=color:inherit>The Dojo MX Blog</a></div><div class=nav-right><div style=position:absolute;width:0;height:0><div id=nav-dropdown-menu class=hidden href=#><div class=nav-item><a aria-current=true class=ancestor href=/posts/>Posts</a></div><div class=nav-item><a>Acerca de</a></div></div></div><a id=nav-dropdown-button href=#><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 6H20M4 12H20M4 18H20" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a><div id=nav-menu><div class=nav-item><a aria-current=true class=ancestor href=/posts/>Posts</a></div><div class=nav-item><a>Acerca de</a></div></div><a id=theme-switcher href=#><svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3V4m0 16v1M4 12H3M6.31412 6.31412 5.5 5.5m12.1859.81412L18.5 5.5M6.31412 17.69 5.5 18.5001M17.6859 17.69 18.5 18.5001M21 12H20m-4 0c0 2.2091-1.7909 4-4 4-2.20914.0-4-1.7909-4-4 0-2.20914 1.79086-4 4-4 2.2091.0 4 1.79086 4 4z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.32031 11.6835c0 4.9706 4.02944 9 8.99999 9 3.7872.0 7.028-2.3392 8.3565-5.6515C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834c-4.9706.0-8.99999-4.0294-8.99999-8.99998C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996 5.65605 4.66028 3.32031 7.89912 3.32031 11.6835z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a></div></div></header><div class="flex grow"><div id=main-pane><main id=main-content><div class=single-header><ol class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://blog.thedojo.mx/><span itemprop=name>Home</span>
</a><meta itemprop=position content='1'></li><span>&nbsp»&nbsp</span><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://blog.thedojo.mx/posts/><span itemprop=name>Posts</span>
</a><meta itemprop=position content='2'></li><span>&nbsp»&nbsp</span></ol><h1>Producción y desarollo en Django</h1><time class=dim datetime=2019-03-09T00:00:00+00:00>March 9, 2019</time><div class=term-container><div class=tag><a href=https://blog.thedojo.mx/tags/django/>#Django</a></div><div class=tag><a href=https://blog.thedojo.mx/tags/producci%C3%B3n/>#producción</a></div><div class=tag><a href=https://blog.thedojo.mx/tags/deploy/>#deploy</a></div><div class=tag><a href=https://blog.thedojo.mx/tags/despliegue/>#despliegue</a></div></ol></div><section class=page-section><h2 id=para-no-salir-herido-al-combinar-desarrollo-y-producción-en-django>Para no salir herido al combinar desarrollo y producción en Django.</h2><blockquote><p>Se usará Django >= 2.0</p></blockquote><blockquote><p>Se usará Python >= 3.6</p></blockquote><h2 id=problemática>Problemática</h2><p>Mientras desarrollaba en Django, me encontré con un problema, requería hacer múltiples pruebas con el ORM para generar consultas complejas a base de datos.
Para hacer la prueba se ejecuta:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>&gt; python manage.py shell
</span></span></code></pre></div><p>Con lo que se abrirá una consola de Python, en dicha consola se puede importar un modelo y con ese modelo hacer las pruebas requeridas.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>&gt; from blog.models import Post
</span></span><span style=display:flex><span>&gt; all_posts <span style=color:#f92672>=</span> Post.objects.all<span style=color:#f92672>()</span>
</span></span></code></pre></div><p>Todo opera bien hasta que debemos importar múltiples modelos, al modificar un modelo se debe detener la consola <code>Ctrl+C</code> y ejecutarla de nueva cuenta, y de nueva cuenta cargar todos los modelos.</p><p>A fin de no perder tiempo cargando los modelos en cada detención de la consola se opta por usar una herramienta llamada <a href=https://django-extensions.readthedocs.io/en/latest/><code>django-extensions</code></a></p><p>La instalo en mi proyecto usando:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>&gt; pip install django-extensions
</span></span></code></pre></div><p>y agregándola a mis apps en el archivo <code>settings.py</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>INSTALLED_APPS <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;django_extensions&#39;</span>,
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>Hecho eso, puedo ejecutar una consola donde se cargan ya todos los modelos listos para hacer consultas a la base de datos. Traducción: ahorramos mucho tiempo.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>&gt; python manage.py shell_plus
</span></span></code></pre></div><p>El siguiente problema que hallé es que esta herramienta no debe estar en producción, solo es para propósitos de desarrollo.</p><p>Pero, ¿Qué hacer?, ¿La agrego y quito de <code>INSTALLED_APPS</code> manualmente a cada push que haga en mi repositorio?, esa estrategia es muy propensa al error y a la hora de desplegar podemos tener un error por no tener instalada la herramienta.</p><p>La forma que me ha gustado más hasta ahora es hacer uso del paquete <code>sys</code> de Python, con el que puedo con uno de sus módulos leer los argumentos con los que se ejecuta la aplicación de Django.</p><p>Vámos como queda el archivo <code>settings.py</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span><span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>DEBUG_COMMAND <span style=color:#f92672>=</span> set(<span style=color:#e6db74>&#39;shell_plus&#39;</span>, <span style=color:#e6db74>&#39;shell&#39;</span>, <span style=color:#e6db74>&#39;runserver&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DJANGO_RUN_ARGS <span style=color:#f92672>=</span> set(sys<span style=color:#f92672>.</span>argv)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> len(DJANGO_RUN_ARGS<span style=color:#f92672>.</span>intersection(DEBUG_COMMAND))<span style=color:#f92672>&gt;</span><span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># Code executed in develop time</span>
</span></span><span style=display:flex><span>    INSTALLED_APPS<span style=color:#f92672>.</span>append(<span style=color:#e6db74>&#39;django_extensions&#39;</span>)
</span></span></code></pre></div><p>En <code>DEBUG_COMMAND</code> se definen los comandos que se ejecutan solo en desarrollo, hay que recordar que <code>runserver</code> se agrega también en el set dado que NO se debe pasar a producción la ejecución de Django por medio de dicho mecanismo, para producción lo correcto es pasarlo con un WSGI server diseñado para producción como <a href=https://gunicorn.org>guinicorn</a>.</p><p><code>DJANGO_RUN_ARGS</code> es la variable que guardará los argumentos con los que se ejecuta Django.</p><p>Ambas variables son un set, así es sencillo comprobar que argumentos serán catalogados como de desarrollo por medio de la intersección de ambas variables, el que haya elementos en la intersección implica que por lo menos uno de los argumentos se cataloga como de desarrollo.</p><p>Y bueno, solo falta agregar que después de la condicional se pueden agregar tanto código como se requiera.</p><p>No olvides comentar tu experiencia usando esta estrategia para manejar desarrollo y producción en Django.</p></section></main><footer id=main-footer><div class=footer><a href=#>Scroll to Top</a><div class=footer-copyright><div class=dim>© 2025 Héctor Patricio</div><div>Made with ❤️ and powered by <a href=https://github.com/math-queiroz/rusty-typewriter target=_blank>Rusty Typewriter</a> theme for <a href=https://gohugo.io/ target=_blank>Hugo</a></div></div></div></footer></div><aside id=side-pane class=side-sticky><div class=side-details><span>474 words</span>
<span>2 - 3 minutes read</span></div><h3>Table Of Contents</h3><nav id=TableOfContents><ul><li><a href=#para-no-salir-herido-al-combinar-desarrollo-y-producción-en-django>Para no salir herido al combinar desarrollo y producción en Django.</a></li><li><a href=#problemática>Problemática</a></li></ul></nav></aside></div></div></body></html>